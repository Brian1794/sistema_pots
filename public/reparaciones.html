<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gesti√≥n de Reparaciones</title>
  <link rel="stylesheet" href="./css/reparaciones.css">
</head>
<body>
  <!-- ENCABEZADO -->
  <header id="encabezado-rep">
    <div class="header-contenido-rep">
      <div class="logo-rep">üîß Gesti√≥n de Reparaciones</div>
      <div class="acciones-header-rep">
        <a href="/admin.html" class="btn-volver">‚Üê Volver al Admin</a>
      </div>
    </div>
  </header>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-rep">
    <!-- TABS DE NAVEGACI√ìN -->
    <div class="contenedor-tabs-rep">
      <button class="tab-btn-rep activo" onclick="cambiarTabRep('agregar')">‚ûï Agregar Reparaci√≥n</button>
      <button class="tab-btn-rep" onclick="cambiarTabRep('gestionar')">üîç Gesti√≥n de Reparaciones</button>
      <button class="tab-btn-rep" onclick="cambiarTabRep('tecnicos')">üë®‚Äçüîß Gesti√≥n de T√©cnicos</button>
    </div>

    <!-- TAB 1: AGREGAR REPARACI√ìN -->
    <div id="tab-agregar-rep" class="tab-contenido-rep activo">
      <h2 class="seccion-titulo-rep">‚ûï Agregar Nueva Reparaci√≥n</h2>
      <div id="mensajeContenedorRep"></div>

      <div class="formulario-rep">
        <h3 class="titulo-formulario-rep">‚úèÔ∏è Formulario de Reparaci√≥n</h3>

        <form id="formAgregarReparacion" onsubmit="guardarReparacion(event)">
          <!-- Cliente -->
          <fieldset class="fieldset-rep">
            <legend>Datos del Cliente</legend>
            <div class="fila-dos-rep">
              <div class="grupo-formulario-rep">
                <label for="clienteNombre">Nombre Completo *</label>
                <input type="text" id="clienteNombre" placeholder="Ej: Juan P√©rez" required>
              </div>
              <div class="grupo-formulario-rep">
                <label for="clienteTelefono">Tel√©fono *</label>
                <input type="tel" id="clienteTelefono" placeholder="3001234567" required>
              </div>
            </div>

            <div class="fila-dos-rep">
              <div class="grupo-formulario-rep">
                <label for="clienteEmail">Email</label>
                <input type="email" id="clienteEmail" placeholder="correo@ejemplo.com">
              </div>
              <div class="grupo-formulario-rep">
                <label for="clienteCedula">C√©dula/ID</label>
                <input type="text" id="clienteCedula" placeholder="123456789">
              </div>
            </div>
          </fieldset>

          <!-- Equipo -->
          <fieldset class="fieldset-rep">
            <legend>Datos del Equipo</legend>
            <div class="fila-dos-rep">
              <div class="grupo-formulario-rep">
                <label for="tipoEquipo">Tipo de Equipo *</label>
                <select id="tipoEquipo" required>
                  <option value="">-- Selecciona --</option>
                  <option value="Taladro">Taladro</option>
                  <option value="Esmeril">Esmeril</option>
                  <option value="Compresor">Compresor</option>
                  <option value="Motosierra">Motosierra</option>
                  <option value="Cortadora">Cortadora</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
              <div class="grupo-formulario-rep">
                <label for="marca">Marca</label>
                <input type="text" id="marca" placeholder="Ej: DeWalt">
              </div>
            </div>

            <div class="fila-tres-rep">
              <div class="grupo-formulario-rep">
                <label for="modelo">Modelo</label>
                <input type="text" id="modelo" placeholder="Modelo del equipo">
              </div>
              <div class="grupo-formulario-rep">
                <label for="serial">Serial</label>
                <input type="text" id="serial" placeholder="Serial del equipo">
              </div>
              <div class="grupo-formulario-rep">
                <label for="estadoFisico">Estado F√≠sico</label>
                <select id="estadoFisico">
                  <option value="">-- Selecciona --</option>
                  <option value="Bueno">Bueno</option>
                  <option value="Con rayones">Con rayones</option>
                  <option value="Con golpes">Con golpes</option>
                  <option value="Deteriorado">Deteriorado</option>
                </select>
              </div>
            </div>
          </fieldset>

          <!-- Diagn√≥stico -->
          <fieldset class="fieldset-rep">
            <legend>Falla Reportada y Diagn√≥stico</legend>
            <div class="grupo-formulario-rep">
              <label for="fallaReportada">Falla Reportada *</label>
              <textarea id="fallaReportada" placeholder="Describe qu√© no funciona..." rows="3" required></textarea>
            </div>
            <div class="grupo-formulario-rep">
              <label for="accesorios">Accesorios Incluidos</label>
              <textarea id="accesorios" placeholder="Cable, manual, partes, etc." rows="2"></textarea>
            </div>
          </fieldset>

          <!-- Asignaci√≥n y Costo -->
          <fieldset class="fieldset-rep">
            <legend>Asignaci√≥n y Costo</legend>
            <div class="fila-tres-rep">
              <div class="grupo-formulario-rep">
                <label for="selectTecnico">T√©cnico Asignado</label>
                <select id="selectTecnico">
                  <option value="">-- Sin asignar --</option>
                </select>
              </div>
              <div class="grupo-formulario-rep">
                <label for="costoEstimado">Costo Estimado ($)</label>
                <input type="number" id="costoEstimado" min="0" step="0.01" placeholder="0.00">
              </div>
              <div class="grupo-formulario-rep">
                <label for="garantia">Garant√≠a (d√≠as)</label>
                <input type="number" id="garantia" min="0" placeholder="0">
              </div>
            </div>
            <div class="grupo-formulario-rep">
              <label for="fechaEntregaEstimada">Fecha Entrega Estimada</label>
              <input type="date" id="fechaEntregaEstimada">
            </div>
          </fieldset>

          <div class="botones-formulario-rep">
            <button type="submit" class="btn btn-primario btn-grande-rep">üíæ Guardar Reparaci√≥n</button>
            <button type="button" class="btn btn-secundario" onclick="limpiarFormularioReparacion()">üîÑ Limpiar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- TAB 2: GESTI√ìN DE REPARACIONES -->
    <div id="tab-gestionar-rep" class="tab-contenido-rep">
      <h2 class="seccion-titulo-rep">üîç Gesti√≥n de Reparaciones</h2>

      <div class="filtro-busqueda-rep">
        <input 
          type="text" 
          id="buscadorReparaciones" 
          placeholder="üîç Buscar por nombre, orden o equipo..."
          onkeyup="filtrarReparaciones()"
        >
        <select id="filtroEstadoRep" onchange="filtrarReparaciones()" title="Filtrar por estado">
          <option value="">üìä Todos los estados</option>
          <option value="Recibido">Recibido</option>
          <option value="Diagn√≥stico">Diagn√≥stico</option>
          <option value="En reparaci√≥n">En reparaci√≥n</option>
          <option value="Listo">Listo</option>
          <option value="Entregado">Entregado</option>
        </select>
      </div>

      <table class="tabla tabla-reparaciones">
        <thead>
          <tr>
            <th>Orden</th>
            <th>Cliente</th>
            <th>Equipo</th>
            <th>Tipo</th>
            <th>Estado</th>
            <th>Recibido</th>
            <th>Entrega Est.</th>
            <th class="acciones-header">Acciones</th>
          </tr>
        </thead>
        <tbody id="reparacionesTabla">
          <tr>
            <td colspan="8" class="sin-datos">Cargando reparaciones...</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- TAB 3: GESTI√ìN DE T√âCNICOS -->
    <div id="tab-tecnicos-rep" class="tab-contenido-rep">
      <h2 class="seccion-titulo-rep">üë®‚Äçüîß Gesti√≥n de T√©cnicos</h2>

      <!-- Agregar T√©cnico -->
      <div class="formulario-rep">
        <h3 class="titulo-formulario-rep">‚ûï Agregar Nuevo T√©cnico</h3>

        <form id="formAgregarTecnico" onsubmit="guardarTecnico(event)">
          <div class="fila-tres-rep">
            <div class="grupo-formulario-rep">
              <label for="nombreTecnico">Nombre *</label>
              <input type="text" id="nombreTecnico" placeholder="Ej: Carlos Garc√≠a" required>
            </div>
            <div class="grupo-formulario-rep">
              <label for="telefonoTecnico">Tel√©fono</label>
              <input type="tel" id="telefonoTecnico" placeholder="3001234567">
            </div>
            <div class="grupo-formulario-rep">
              <label for="emailTecnico">Email</label>
              <input type="email" id="emailTecnico" placeholder="correo@ejemplo.com">
            </div>
          </div>

          <div class="botones-formulario-rep">
            <button type="submit" class="btn btn-primario">üíæ Agregar T√©cnico</button>
            <button type="button" class="btn btn-secundario" onclick="limpiarFormularioTecnico()">üîÑ Limpiar</button>
          </div>
        </form>
      </div>

      <!-- Lista de T√©cnicos -->
      <div class="formulario-rep">
        <h3 class="titulo-formulario-rep">üìã T√©cnicos Registrados</h3>

        <div class="filtro-busqueda-rep">
          <input 
            type="text" 
            id="buscadorTecnicos" 
            placeholder="üîç Buscar t√©cnico..."
            onkeyup="filtrarTecnicos()"
          >
        </div>

        <table class="tabla tabla-tecnicos">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Tel√©fono</th>
              <th>Email</th>
              <th class="acciones-header">Acciones</th>
            </tr>
          </thead>
          <tbody id="tecnicosTabla">
            <tr>
              <td colspan="4" class="sin-datos">Cargando t√©cnicos...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <script src="js/reparaciones.js"></script>
</body>
</html>
